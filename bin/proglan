#!/usr/bin/python

from proglan.environment.environment import *
import sys
import traceback

if len(sys.argv) < 2:
    env = Environment()
    while True:
        code = raw_input(">>>")

        try:
            env.load_str(code)
            print(str(env.evaluate()))
        except Exception as e:
            print("Exception: " + str(e))
            traceback.print_exc()
else:
    code = None
    with open(sys.argv[1], 'r') as f:
        code = f.read()

    try:
        env = Environment(input=code)
        env.evaluate()
    except Exception as e:
        traceback.print_exc()
        print("Exception: " + str(e))
